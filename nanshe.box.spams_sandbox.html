

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nanshe.box.spams_sandbox module &mdash; nanshe 0.1.0a53+29.g6afccbf documentation</title>
    
    <link rel="stylesheet" href="_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0a53+29.g6afccbf',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="top" title="nanshe 0.1.0a53+29.g6afccbf documentation" href="index.html" />
    <link rel="up" title="nanshe.box package" href="nanshe.box.html" />
    <link rel="next" title="nanshe.imp package" href="nanshe.imp.html" />
    <link rel="prev" title="nanshe.box package" href="nanshe.box.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body role="document">
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nanshe.imp.html" title="nanshe.imp package"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nanshe.box.html" title="nanshe.box package"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">nanshe 0.1.0a53+29.g6afccbf documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="nanshe.html" >nanshe package</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="nanshe.box.html" accesskey="U">nanshe.box package</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-nanshe.box.spams_sandbox">
<span id="nanshe-box-spams-sandbox-module"></span><h1>nanshe.box.spams_sandbox module<a class="headerlink" href="#module-nanshe.box.spams_sandbox" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">spams_sandbox</span></code> module provides mechanisms for sandboxing SPAMS.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>SPAMS sometimes seems to step on the interpreter. As a result, we provide a
number of strategies to address this, by launching it in a separate process so
that it hopefully does not mess up the main interpreter. We also try to keep
the module space clean. This seems to help.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="nanshe.box.spams_sandbox.SPAMSException">
<em class="property">exception </em><code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">SPAMSException</code><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#SPAMSException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.SPAMSException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="function">
<dt id="nanshe.box.spams_sandbox.call_multiprocessing_array_spams_trainDL">
<code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">call_multiprocessing_array_spams_trainDL</code><span class="sig-paren">(</span><em>X</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#call_multiprocessing_array_spams_trainDL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.call_multiprocessing_array_spams_trainDL" title="Permalink to this definition">¶</a></dt>
<dd><p>Designed to start spams.trainDL in a separate process and handle
result in an unnoticeably different way.</p>
<p>It is necessary to run SPAMS in a separate process as segmentation
faults have been discovered in later parts of the Python code dependent
on whether SPAMS has run or not. It is suspected that spams may
interfere with the interpreter. Thus, it should be sandboxed (run in a
different Python interpreter) so that it doesn&#8217;t damage what happens in
this one.</p>
<p>This particular version uses a multiprocessing.Array to share memory to
return the resulting dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>X</strong> (<em>numpy.matrix</em>) &#8211; a Fortran order NumPy
Matrix with the same name
as used by spams.trainDL
(so if someone tries to use
it as a keyword
argument...).</li>
<li><strong>*args</strong> (<em>list</em>) &#8211; a list of position
arguments to pass to
spams.trainDL.</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; a dictionary of keyword
arguments to pass to
spams.trainDL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is somewhat faster than using multiprocessing.Queue.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="nanshe.box.spams_sandbox.call_multiprocessing_queue_spams_trainDL">
<code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">call_multiprocessing_queue_spams_trainDL</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#call_multiprocessing_queue_spams_trainDL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.call_multiprocessing_queue_spams_trainDL" title="Permalink to this definition">¶</a></dt>
<dd><p>Designed to start spams.trainDL in a separate process and handle the
result in an unnoticeably different way.</p>
<p>It is necessary to run SPAMS in a separate process as segmentation
faults have been discovered in later parts of the Python code dependent
on whether SPAMS has run or not. It is suspected that spams may
interfere with the interpreter. Thus, it should be sandboxed (run in a
different Python interpreter) so that it doesn&#8217;t damage what happens in
this one.</p>
<p>This particular version uses a multiprocessing.Queue to return the
resulting dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>*args</strong> (<em>list</em>) &#8211; a list of position
arguments to pass to
spams.trainDL.</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; a dictionary of keyword
arguments to pass to
spams.trainDL.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> &#8211;
the dictionary found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nanshe.box.spams_sandbox.call_spams_trainDL">
<code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">call_spams_trainDL</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#call_spams_trainDL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.call_spams_trainDL" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulates call to spams.trainDL. Ensures copy of results occur just
in case. Designed to be like the multiprocessing calls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>*args</strong> (<em>list</em>) &#8211; a list of position
arguments to pass to
spams.trainDL.</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; a dictionary of keyword
arguments to pass to
spams.trainDL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For legacy.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="nanshe.box.spams_sandbox.run_multiprocessing_array_spams_trainDL">
<code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">run_multiprocessing_array_spams_trainDL</code><span class="sig-paren">(</span><em>result_array_type</em>, <em>result_array</em>, <em>X_array_type</em>, <em>X_array</em>, <em>D_is_arg=False</em>, <em>D_array_type=None</em>, <em>D_array=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#run_multiprocessing_array_spams_trainDL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.run_multiprocessing_array_spams_trainDL" title="Permalink to this definition">¶</a></dt>
<dd><p>Designed to start spams.trainDL in a separate process and handle the
result in an unnoticeably different way.</p>
<p>It is necessary to run SPAMS in a separate process as segmentation
faults have been discovered in later parts of the Python code dependent
on whether SPAMS has run or not. It is suspected that spams may
interfere with the interpreter. Thus, it should be sandboxed (run in a
different Python interpreter) so that it doesn&#8217;t damage what happens in
this one.</p>
<p>This particular version uses a multiprocessing.Array to share memory to
return the resulting dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>result_array_type</strong> (<em>numpy.ctypeslib.ndpointer</em>) &#8211; a pointer type with
properties needed
by result_array.</li>
<li><strong>result_array</strong> (<em>multiprocessing.RawArray</em>) &#8211; shared memory array
to store results
in.</li>
<li><strong>X_array_type</strong> (<em>numpy.ctypeslib.ndpointer</em>) &#8211; a pointer type with
properties needed
by X_array.</li>
<li><strong>X_array</strong> (<em>numpy.ndarray</em>) &#8211; currently uses
numpy ndarray as
input.</li>
<li><strong>*args</strong> (<em>list</em>) &#8211; a list of position
arguments to pass
to spams.trainDL.</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; a dictionary of
keyword arguments
to pass to
spams.trainDL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is somewhat faster than using multiprocessing.Queue.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="nanshe.box.spams_sandbox.run_multiprocessing_queue_spams_trainDL">
<code class="descclassname">nanshe.box.spams_sandbox.</code><code class="descname">run_multiprocessing_queue_spams_trainDL</code><span class="sig-paren">(</span><em>out_queue</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nanshe/box/spams_sandbox.html#run_multiprocessing_queue_spams_trainDL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nanshe.box.spams_sandbox.run_multiprocessing_queue_spams_trainDL" title="Permalink to this definition">¶</a></dt>
<dd><p>Designed to run spams.trainDL in a separate process.</p>
<p>It is necessary to run SPAMS in a separate process as segmentation
faults have been discovered in later parts of the Python code dependent
on whether SPAMS has run or not. It is suspected that spams may
interfere with the interpreter. Thus, it should be sandboxed (run in a
different Python interpreter) so that it doesn&#8217;t damage what happens in
this one.</p>
<p>This particular version uses a multiprocessing.Queue to return the
resulting dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>out_queue</strong> (<em>multiprocessing.Queue</em>) &#8211; what will take the returned
dictionary from
spams.trainDL.</li>
<li><strong>*args</strong> (<em>list</em>) &#8211; a list of position
arguments to pass to
spams.trainDL.</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; a dictionary of keyword
arguments to pass to
spams.trainDL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">nanshe.box.spams_sandbox module</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="nanshe.box.html"
                          title="Previous page">&larr; nanshe.box package</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="nanshe.imp.html"
                          title="Next page">&rarr; nanshe.imp package</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/nanshe.box.spams_sandbox.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nanshe.imp.html" title="nanshe.imp package"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nanshe.box.html" title="nanshe.box package"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">nanshe 0.1.0a53+29.g6afccbf documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="nanshe.html" >nanshe package</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="nanshe.box.html" >nanshe.box package</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014-2015, John A. Kirkham.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>